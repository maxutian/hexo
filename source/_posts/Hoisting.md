---
title: Hoisting
date: 2017-04-11 20:15:08
tags:
	-Hoisting,
	-javascript
categories: javascript
---
{% note primary %}

**[原文链接](https://segmentfault.com/a/1190000003114255)**

{% endnote %}

近日查阅网上的资料时，看到一个词：变量提升（Hoisting）。感觉这个词好像很熟悉，从字面上理解好像就能搞懂，但是又不知道到底是个什么东西，于是google了一下，顺便做一个学习笔记！

首先，MDN中是这么说的：变量提升是一个你在javascript文档中找不到的东西。(哦？还挺神秘的？)它会引起一些误解。比如：变量提升会让人们觉得变量和函数声明会被移动到你的代码顶端，但事实却并非如此。事实是：在代码的编译阶段，变量和函数声明会被放到内存中，但是在你的代码中，它们的位置并不会改变。(看完英文的解释，好像还是有点蒙蔽)

随后，我又点开了一篇文章，才算是基本明白了变量提升的含义。

文章首先抛出了两个问题，让我猜猜两段代码的输出结果。

```

var foo = 1;
function bar(){
	if(!foo){
		var foo = 10;
	}
	alert(foo);
}
bar();

```

```

var a = 1;
function b(){
		a = 10;
		return;
		function a(){}
}
b();
alert(a);

```

根据我极少的经验，我会认为第一个的结果是undefined，因为我认为if语句没有被执行，所以foo也不会被定义。第二个是10，因为function b()中为a重新赋值了10。结果发现都不对(啊，基础好差，惭愧)。

然后看了作者对两段代码的重构和解释，才算是理解了。

两段代码重构后如下：

<!-- more -->

```

var foo = 1;
function bar() {
    var foo;
    if (!foo) {
        foo = 10;
    }
    alert(foo);
}
bar();

```

```

var a = 1;
function b() {
    function a() {}
    a = 10;
    return;
}
b();
alert(a);

```

所有的变量和函数声明都被上升到了所在作用域的顶端，即变量提升。然而在理解第二个例子时，还是遇到了一点小问题：为什么一个函数被提升后，全局变量a的值就不会改变了呢？根据作者的说法，函数本身也是一种变量。所以我可以理解为a = 10这个语句赋值的就是function a() {}这个函数的结果，这样一来就说得通了。其中，作者还指出两种创建函数的方法创建的函数被提升时的差异：通过函数声明创建的函数会被整体提升到代码顶部，而通过变量定义的函数在被提升时只会提升变量，函数体并不会被提升。(又学到了一点，开心)。

今天，我了解了变量提升的含义，知道了可以通过变量对一个同名函数赋值，知道了两种函数创建方法进行变量提升时的差异。啊，又填了一点javascript的坑，就很开心。

![xiao](https://www.tuchuang001.com/images/2017/04/11/ubiaoqing2926b35bd8c5cd170acf4bdcf00345ac.jpg)